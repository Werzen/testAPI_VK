# Автоматизированные API тесты для версии 5.131 API ВКонтакте.

## 1. Метод users.get: 
Возвращает расширенную информацию о пользователях. Документация: https://dev.vk.com/method/users.get .

Сценарии:

### 1.1 Получение информации о пользователе с корректным user_id.
Ожидаемый результат: возвращаемые данные корректны

### 1.2 Получение информации о пользователе с некорректным user_id (например,
несуществующий пользователь).
Ожидаемый результат: ошибка с соответствующим кодом и сообщением

### 1.3 Получение информации о пользователе с использованием дополнительных полей
(например, дата рождения, город).
Ожидаемый результат: возвращаемые данные корректны

## 2. Метод photos.search: 
Осуществляет поиск изображений по местоположению или описанию. Документация: https://dev.vk.com/method/photos.search .

Сценарии:

### 2.1 Поиск изображений по корректному местоположению (широта и долгота).
Ожидаемый результат: возвращаемые данные содержат изображения,
соответствующие запросу

### 2.2 Поиск изображений с использованием некорректных параметров местоположения  
(например, широта и долгота вне допустимого диапазона).
Ожидаемый результат: ошибка с соответствующим кодом и сообщением
---
Для корректной работы тестов необходим файл с переменными окружения .env . Должны быть определены переменные: *SERVICE_ACCESS_KEY* - ключ доступа до API, *GLOBAL_VERSION_API_VK* - тестируемая версия API(проверялось на версии 5.131), *GLOBAL_URL* - базовый URL (https://api.vk.com).

**tests/conftest.py** - содержит используемые фикстуры: *load_dotenv_fixture* - загружет переменные окружения перед тестами. *get_general_params* подгружает общие для всех тестов параметры (токен и версия) и предоставляет их в тестах по требованию.  
**tests/tests_users/test_get_users.py** - реализует сценарии секции 1 в тестовой функции *test_users_get* (для сценария 1.2 при любом некорректном user_id API возвращает пустой реквест без ошибок).
**tests/tests_photos/test_search_photos.py**  - реализует сценарии секции 2. Тестовая функция *test_photos_search* реализует сценарии 2.1 и 2.2(в случае, если широта и долгота вне допустимого диапазона). Тестовые функции *test_photos_search_with_invalid_parameters_lat* и *test_photos_search_with_invalid_parameters_long* реализуют сценарии некорректного(строкового) значения параметра широты и(или) долготы и получает результат: ошибка с соответствующим кодом и сообщением. 

Все сценарии проверяют реквесты на корректность со схемами описанными в src/schema/post.py . Описание ошибок прописаны в src/enums/global_enums.py .

Запросы к API реализованы через класс APIClient (client.py). 
Загрузка mock-данных во всех тестах резована через класс MockResponse (mock.py) с помощью monkeypatch.
